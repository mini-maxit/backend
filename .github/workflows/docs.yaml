name: docs

on:
  push:
    branches:
      - master
      - swaggerUI
  workflow_dispatch:


jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: Setup go
      uses: actions/setup-go@v5

    - name: Install Swagger tools
      run: |
        go install github.com/swaggo/swag/cmd/swag@latest
        go get -u github.com/swaggo/http-swagger

    - name: Init swag
      run: cd cmd/app; swag init --output ../../docs --dir ./,../../internal/api/http/utils,../../package/domain/schemas,../../

    - name: Auto commit
      run: |
        git auto-commit -m "Update swagger docs" -a


